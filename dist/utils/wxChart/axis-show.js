'use strict';

/**
 * Created by ChenChao on 2017/4/12.
 * 坐标轴显示
 */

module.exports = function init(canvasId, options) {
	console.log(canvasId, options);
	var _ctx = null;
	var _cw = options.width;
	var _ch = options.height;
	var _x = 0;
	var _y = 0;
	return {
		init: function init() {
			_ctx = wx.createCanvasContext(canvasId);
			if (_cw === 'auto') {
				wx.getSystemInfo({
					success: function success(result) {
						_cw = result.windowWidth;
					}
				});
			}
			if (_ch === 'auto') {
				_ch = 225;
			}
		},
		start: function start(x, y) {
			_x = x;
			_y = y;
			this.draw(x, y);
		},
		move: function move(x, y) {
			if (x !== _x || y !== _y) {
				if (x < 0 || x > _cw || y < 0 || y > _ch) {
					return;
				}
				_x = x;
				_y = y;
				this.draw(x, y);
			}
		},
		stop: function stop() {
			this.clear();
		},
		draw: function draw(x, y) {
			this.clear();
			_ctx.setStrokeStyle('#ffffff');
			_ctx.beginPath();
			_ctx.setLineWidth(1);
			//x
			_ctx.moveTo(0, y);
			_ctx.lineTo(_cw, y);
			_ctx.stroke();
			//y
			_ctx.moveTo(x, 0);
			_ctx.lineTo(x, _ch);
			_ctx.stroke();

			_ctx.closePath();
			_ctx.draw();
		},
		clear: function clear() {
			_ctx.clearRect(0, 0, _cw, _ch);
			_ctx.draw();
		}
	};
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF4aXMtc2hvdy5qcyJdLCJuYW1lcyI6WyJtb2R1bGUiLCJleHBvcnRzIiwiaW5pdCIsImNhbnZhc0lkIiwib3B0aW9ucyIsImNvbnNvbGUiLCJsb2ciLCJfY3R4IiwiX2N3Iiwid2lkdGgiLCJfY2giLCJoZWlnaHQiLCJfeCIsIl95Iiwid3giLCJjcmVhdGVDYW52YXNDb250ZXh0IiwiZ2V0U3lzdGVtSW5mbyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJ3aW5kb3dXaWR0aCIsInN0YXJ0IiwieCIsInkiLCJkcmF3IiwibW92ZSIsInN0b3AiLCJjbGVhciIsInNldFN0cm9rZVN0eWxlIiwiYmVnaW5QYXRoIiwic2V0TGluZVdpZHRoIiwibW92ZVRvIiwibGluZVRvIiwic3Ryb2tlIiwiY2xvc2VQYXRoIiwiY2xlYXJSZWN0Il0sIm1hcHBpbmdzIjoiOztBQUFBOzs7OztBQUtBQSxPQUFPQyxPQUFQLEdBQWlCLFNBQVNDLElBQVQsQ0FBY0MsUUFBZCxFQUF3QkMsT0FBeEIsRUFBaUM7QUFDOUNDLFNBQVFDLEdBQVIsQ0FBWUgsUUFBWixFQUFzQkMsT0FBdEI7QUFDQSxLQUFJRyxPQUFPLElBQVg7QUFDQSxLQUFJQyxNQUFNSixRQUFRSyxLQUFsQjtBQUNBLEtBQUlDLE1BQU1OLFFBQVFPLE1BQWxCO0FBQ0EsS0FBSUMsS0FBSyxDQUFUO0FBQ0EsS0FBSUMsS0FBSyxDQUFUO0FBQ0EsUUFBTztBQUNWWCxRQUFNLGdCQUFZO0FBQ2RLLFVBQU9PLEdBQUdDLG1CQUFILENBQXVCWixRQUF2QixDQUFQO0FBQ0EsT0FBR0ssUUFBUSxNQUFYLEVBQW1CO0FBQ3RCTSxPQUFHRSxhQUFILENBQWlCO0FBQ2JDLGNBQVMsaUJBQVVDLE1BQVYsRUFBa0I7QUFDOUJWLFlBQU1VLE9BQU9DLFdBQWI7QUFDSTtBQUhZLEtBQWpCO0FBS0k7QUFDRCxPQUFHVCxRQUFRLE1BQVgsRUFBa0I7QUFDckJBLFVBQU0sR0FBTjtBQUNJO0FBQ0osR0FiUztBQWNWVSxTQUFPLGVBQVVDLENBQVYsRUFBYUMsQ0FBYixFQUFnQjtBQUNuQlYsUUFBS1MsQ0FBTDtBQUNBUixRQUFLUyxDQUFMO0FBQ0EsUUFBS0MsSUFBTCxDQUFVRixDQUFWLEVBQWFDLENBQWI7QUFDSCxHQWxCUztBQW1CVkUsUUFBTSxjQUFVSCxDQUFWLEVBQWFDLENBQWIsRUFBZ0I7QUFDbEIsT0FBR0QsTUFBTVQsRUFBTixJQUFZVSxNQUFNVCxFQUFyQixFQUF3QjtBQUMzQixRQUFHUSxJQUFJLENBQUosSUFBU0EsSUFBSWIsR0FBYixJQUFvQmMsSUFBSSxDQUF4QixJQUE2QkEsSUFBSVosR0FBcEMsRUFBd0M7QUFDcEM7QUFDSDtBQUNERSxTQUFLUyxDQUFMO0FBQ0FSLFNBQUtTLENBQUw7QUFDQSxTQUFLQyxJQUFMLENBQVVGLENBQVYsRUFBYUMsQ0FBYjtBQUNJO0FBQ0osR0E1QlM7QUE2QlZHLFFBQU0sZ0JBQVk7QUFDZCxRQUFLQyxLQUFMO0FBQ0gsR0EvQlM7QUFnQ1ZILFFBQU0sY0FBVUYsQ0FBVixFQUFhQyxDQUFiLEVBQWdCO0FBQ2xCLFFBQUtJLEtBQUw7QUFDQW5CLFFBQUtvQixjQUFMLENBQW9CLFNBQXBCO0FBQ0FwQixRQUFLcUIsU0FBTDtBQUNBckIsUUFBS3NCLFlBQUwsQ0FBa0IsQ0FBbEI7QUFDQTtBQUNBdEIsUUFBS3VCLE1BQUwsQ0FBWSxDQUFaLEVBQWVSLENBQWY7QUFDQWYsUUFBS3dCLE1BQUwsQ0FBWXZCLEdBQVosRUFBaUJjLENBQWpCO0FBQ0FmLFFBQUt5QixNQUFMO0FBQ0E7QUFDQXpCLFFBQUt1QixNQUFMLENBQVlULENBQVosRUFBZSxDQUFmO0FBQ0FkLFFBQUt3QixNQUFMLENBQVlWLENBQVosRUFBZVgsR0FBZjtBQUNBSCxRQUFLeUIsTUFBTDs7QUFFQXpCLFFBQUswQixTQUFMO0FBQ0ExQixRQUFLZ0IsSUFBTDtBQUNILEdBaERTO0FBaURWRyxTQUFPLGlCQUFZO0FBQ2ZuQixRQUFLMkIsU0FBTCxDQUFlLENBQWYsRUFBa0IsQ0FBbEIsRUFBcUIxQixHQUFyQixFQUEwQkUsR0FBMUI7QUFDQUgsUUFBS2dCLElBQUw7QUFDSDtBQXBEUyxFQUFQO0FBc0RILENBN0REIiwiZmlsZSI6ImF4aXMtc2hvdy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBDaGVuQ2hhbyBvbiAyMDE3LzQvMTIuXG4gKiDlnZDmoIfovbTmmL7npLpcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluaXQoY2FudmFzSWQsIG9wdGlvbnMpIHtcbiAgICBjb25zb2xlLmxvZyhjYW52YXNJZCwgb3B0aW9ucyk7XG4gICAgdmFyIF9jdHggPSBudWxsO1xuICAgIHZhciBfY3cgPSBvcHRpb25zLndpZHRoO1xuICAgIHZhciBfY2ggPSBvcHRpb25zLmhlaWdodDtcbiAgICB2YXIgX3ggPSAwO1xuICAgIHZhciBfeSA9IDA7XG4gICAgcmV0dXJuIHtcblx0aW5pdDogZnVuY3Rpb24gKCkge1xuXHQgICAgX2N0eCA9IHd4LmNyZWF0ZUNhbnZhc0NvbnRleHQoY2FudmFzSWQpO1xuXHQgICAgaWYoX2N3ID09PSAnYXV0bycpIHtcblx0XHR3eC5nZXRTeXN0ZW1JbmZvKHtcblx0XHQgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuXHRcdFx0X2N3ID0gcmVzdWx0LndpbmRvd1dpZHRoO1xuXHRcdCAgICB9XG5cdFx0fSk7XG5cdCAgICB9XG5cdCAgICBpZihfY2ggPT09ICdhdXRvJyl7XG5cdFx0X2NoID0gMjI1O1xuXHQgICAgfVxuXHR9LFxuXHRzdGFydDogZnVuY3Rpb24gKHgsIHkpIHtcblx0ICAgIF94ID0geDtcblx0ICAgIF95ID0geTtcblx0ICAgIHRoaXMuZHJhdyh4LCB5KTtcblx0fSxcblx0bW92ZTogZnVuY3Rpb24gKHgsIHkpIHtcblx0ICAgIGlmKHggIT09IF94IHx8IHkgIT09IF95KXtcblx0XHRpZih4IDwgMCB8fCB4ID4gX2N3IHx8IHkgPCAwIHx8IHkgPiBfY2gpe1xuXHRcdCAgICByZXR1cm47XG5cdFx0fVxuXHRcdF94ID0geDtcblx0XHRfeSA9IHk7XG5cdFx0dGhpcy5kcmF3KHgsIHkpO1xuXHQgICAgfVxuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmNsZWFyKCk7XG5cdH0sXG5cdGRyYXc6IGZ1bmN0aW9uICh4LCB5KSB7XG5cdCAgICB0aGlzLmNsZWFyKCk7XG5cdCAgICBfY3R4LnNldFN0cm9rZVN0eWxlKCcjZmZmZmZmJyk7XG5cdCAgICBfY3R4LmJlZ2luUGF0aCgpO1xuXHQgICAgX2N0eC5zZXRMaW5lV2lkdGgoMSk7XG5cdCAgICAvL3hcblx0ICAgIF9jdHgubW92ZVRvKDAsIHkpO1xuXHQgICAgX2N0eC5saW5lVG8oX2N3LCB5KTtcblx0ICAgIF9jdHguc3Ryb2tlKCk7XG5cdCAgICAvL3lcblx0ICAgIF9jdHgubW92ZVRvKHgsIDApO1xuXHQgICAgX2N0eC5saW5lVG8oeCwgX2NoKTtcblx0ICAgIF9jdHguc3Ryb2tlKCk7XG5cblx0ICAgIF9jdHguY2xvc2VQYXRoKCk7XG5cdCAgICBfY3R4LmRyYXcoKTtcblx0fSxcblx0Y2xlYXI6IGZ1bmN0aW9uICgpIHtcblx0ICAgIF9jdHguY2xlYXJSZWN0KDAsIDAsIF9jdywgX2NoKTtcblx0ICAgIF9jdHguZHJhdygpO1xuXHR9XG4gICAgfTtcbn07Il19